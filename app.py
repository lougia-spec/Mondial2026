import streamlit as st import pandas as pd import gspread from oauth2client.service_account import ServiceAccountCredentials

st.set_page_config(page_title="Mondial 2026", page_icon="âš½", layout="centered")

def connect_to_gsheets(): scope = ["", ""] creds_dict = dict(st.secrets["gcp_service_account"]) creds = ServiceAccountCredentials.from_json_keyfile_dict(creds_dict, scope) client = gspread.authorize(creds) sheet = client.open("pronostics_db").sheet1 return sheet
Super ! On continue avec la PARTIE 2.

Copie le texte ci-dessous et colle-le Ã  la suite (juste en dessous) de ce que tu viens de coller.

MATCHS = [ {"id": 1, "groupe": "Groupe A", "eqA": "ğŸ‡²ğŸ‡½ Mexique", "eqB": "ğŸ‡¿ğŸ‡¦ Afrique Sud", "scA": None, "scB": None}, {"id": 2, "groupe": "Groupe A", "eqA": "ğŸ‡°ğŸ‡· CorÃ©e du Sud", "eqB": "ğŸ³ï¸ Barragiste D", "scA": None, "scB": None}, {"id": 3, "groupe": "Groupe A", "eqA": "ğŸ‡²ğŸ‡½ Mexique", "eqB": "ğŸ‡°ğŸ‡· CorÃ©e du Sud", "scA": None, "scB": None}, {"id": 4, "groupe": "Groupe A", "eqA": "ğŸ‡¿ğŸ‡¦ Afrique Sud", "eqB": "ğŸ³ï¸ Barragiste D", "scA": None, "scB": None}, {"id": 5, "groupe": "Groupe A", "eqA": "ğŸ³ï¸ Barragiste D", "eqB": "ğŸ‡²ğŸ‡½ Mexique", "scA": None, "scB": None}, {"id": 6, "groupe": "Groupe A", "eqA": "ğŸ‡¿ğŸ‡¦ Afrique Sud", "eqB": "ğŸ‡°ğŸ‡· CorÃ©e du Sud", "scA": None, "scB": None}, {"id": 7, "groupe": "Groupe B", "eqA": "ğŸ‡¨ğŸ‡¦ Canada", "eqB": "ğŸ³ï¸ Barragiste A", "scA": None, "scB": None}, {"id": 8, "groupe": "Groupe B", "eqA": "ğŸ‡¶ğŸ‡¦ Qatar", "eqB": "ğŸ‡¨ğŸ‡­ Suisse", "scA": None, "scB": None}, {"id": 9, "groupe": "Groupe B", "eqA": "ğŸ‡¨ğŸ‡¦ Canada", "eqB": "ğŸ‡¶ğŸ‡¦ Qatar", "scA": None, "scB": None}, {"id": 10, "groupe": "Groupe B", "eqA": "ğŸ³ï¸ Barragiste A", "eqB": "ğŸ‡¨ğŸ‡­ Suisse", "scA": None, "scB": None}, {"id": 11, "groupe": "Groupe B", "eqA": "ğŸ‡¨ğŸ‡­ Suisse", "eqB": "ğŸ‡¨ğŸ‡¦ Canada", "scA": None, "scB": None}, {"id": 12, "groupe": "Groupe B", "eqA": "ğŸ³ï¸ Barragiste A", "eqB": "ğŸ‡¶ğŸ‡¦ Qatar", "scA": None, "scB": None}, {"id": 13, "groupe": "Groupe C", "eqA": "ğŸ‡§ğŸ‡· BrÃ©sil", "eqB": "ğŸ‡²ğŸ‡¦ Maroc", "scA": None, "scB": None}, {"id": 14, "groupe": "Groupe C", "eqA": "ğŸ‡­ğŸ‡¹ HaÃ¯ti", "eqB": "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ Ã‰cosse", "scA": None, "scB": None}, {"id": 15, "groupe": "Groupe C", "eqA": "ğŸ‡§ğŸ‡· BrÃ©sil", "eqB": "ğŸ‡­ğŸ‡¹ HaÃ¯ti", "scA": None, "scB": None}, {"id": 16, "groupe": "Groupe C", "eqA": "ğŸ‡²ğŸ‡¦ Maroc", "eqB": "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ Ã‰cosse", "scA": None, "scB": None}, {"id": 17, "groupe": "Groupe C", "eqA": "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ Ã‰cosse", "eqB": "ğŸ‡§ğŸ‡· BrÃ©sil", "scA": None, "scB": None}, {"id": 18, "groupe": "Groupe C", "eqA": "ğŸ‡²ğŸ‡¦ Maroc", "eqB": "ğŸ‡­ğŸ‡¹ HaÃ¯ti", "scA": None, "scB": None}, {"id": 19, "groupe": "Groupe D", "eqA": "ğŸ‡ºğŸ‡¸ USA", "eqB": "ğŸ‡µğŸ‡¾ Paraguay", "scA": None, "scB": None}, {"id": 20, "groupe": "Groupe D", "eqA": "ğŸ‡¦ğŸ‡º Australie", "eqB": "ğŸ³ï¸ Barragiste C", "scA": None, "scB": None}, {"id": 21, "groupe": "Groupe D", "eqA": "ğŸ‡ºğŸ‡¸ USA", "eqB": "ğŸ‡¦ğŸ‡º Australie", "scA": None, "scB": None}, {"id": 22, "groupe": "Groupe D", "eqA": "ğŸ‡µğŸ‡¾ Paraguay", "eqB": "ğŸ³ï¸ Barragiste C", "scA": None, "scB": None}, {"id": 23, "groupe": "Groupe D", "eqA": "ğŸ³ï¸ Barragiste C", "eqB": "ğŸ‡ºğŸ‡¸ USA", "scA": None, "scB": None}, {"id": 24, "groupe": "Groupe D", "eqA": "ğŸ‡µğŸ‡¾ Paraguay", "eqB": "ğŸ‡¦ğŸ‡º Australie", "scA": None, "scB": None}, {"id": 25, "groupe": "Groupe E", "eqA": "ğŸ‡©ğŸ‡ª Allemagne", "eqB": "ğŸ‡¨ğŸ‡¼ CuraÃ§ao", "scA": None, "scB": None}, {"id": 26, "groupe": "Groupe E", "eqA": "ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire", "eqB": "ğŸ‡ªğŸ‡¨ Ã‰quateur", "scA": None, "scB": None}, {"id": 27, "groupe": "Groupe E", "eqA": "ğŸ‡©ğŸ‡ª Allemagne", "eqB": "ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire", "scA": None, "scB": None}, {"id": 28, "groupe": "Groupe E", "eqA": "ğŸ‡¨ğŸ‡¼ CuraÃ§ao", "eqB": "ğŸ‡ªğŸ‡¨ Ã‰quateur", "scA": None, "scB": None}, {"id": 29, "groupe": "Groupe E", "eqA": "ğŸ‡ªğŸ‡¨ Ã‰quateur", "eqB": "ğŸ‡©ğŸ‡ª Allemagne", "scA": None, "scB": None}, {"id": 30, "groupe": "Groupe E", "eqA": "ğŸ‡¨ğŸ‡¼ CuraÃ§ao", "eqB": "ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire", "scA": None, "scB": None}, {"id": 31, "groupe": "Groupe F", "eqA": "ğŸ‡³ğŸ‡± Pays-Bas", "eqB": "ğŸ‡¯ğŸ‡µ Japon", "scA": None, "scB": None}, {"id": 32, "groupe": "Groupe F", "eqA": "ğŸ³ï¸ Barragiste B", "eqB": "ğŸ‡¹ğŸ‡³ Tunisie", "scA": None, "scB": None}, {"id": 33, "groupe": "Groupe F", "eqA": "ğŸ‡³ğŸ‡± Pays-Bas", "eqB": "ğŸ³ï¸ Barragiste B", "scA": None, "scB": None}, {"id": 34, "groupe": "Groupe F", "eqA": "ğŸ‡¯ğŸ‡µ Japon", "eqB": "ğŸ‡¹ğŸ‡³ Tunisie", "scA": None, "scB": None}, {"id": 35, "groupe": "Groupe F", "eqA": "ğŸ‡¹ğŸ‡³ Tunisie", "eqB": "ğŸ‡³ğŸ‡± Pays-Bas", "scA": None, "scB": None}, {"id": 36, "groupe": "Groupe F", "eqA": "ğŸ‡¯ğŸ‡µ Japon", "eqB": "ğŸ³ï¸ Barragiste B", "scA": None, "scB": None}, {"id": 37, "groupe": "Groupe G", "eqA": "ğŸ‡§ğŸ‡ª Belgique", "eqB": "ğŸ‡ªğŸ‡¬ Ã‰gypte", "scA": None, "scB": None}, {"id": 38, "groupe": "Groupe G", "eqA": "ğŸ‡®ğŸ‡· Iran", "eqB": "ğŸ‡³ğŸ‡¿ Nv-ZÃ©lande", "scA": None, "scB": None}, {"id": 39, "groupe": "Groupe G", "eqA": "ğŸ‡§ğŸ‡ª Belgique", "eqB": "ğŸ‡®ğŸ‡· Iran", "scA": None, "scB": None}, {"id": 40, "groupe": "Groupe G", "eqA": "ğŸ‡ªğŸ‡¬ Ã‰gypte", "eqB": "ğŸ‡³ğŸ‡¿ Nv-ZÃ©lande", "scA": None, "scB": None}, {"id": 41, "groupe": "Groupe G", "eqA": "ğŸ‡³ğŸ‡¿ Nv-ZÃ©lande", "eqB": "ğŸ‡§ğŸ‡ª Belgique", "scA": None, "scB": None}, {"id": 42, "groupe": "Groupe G", "eqA": "ğŸ‡ªğŸ‡¬ Ã‰gypte", "eqB": "ğŸ‡®ğŸ‡· Iran", "scA": None, "scB": None}, {"id": 43, "groupe": "Groupe H", "eqA": "ğŸ‡ªğŸ‡¸ Espagne", "eqB": "ğŸ‡¨ğŸ‡» Cap-Vert", "scA": None, "scB": None}, {"id": 44, "groupe": "Groupe H", "eqA": "ğŸ‡¸ğŸ‡¦ Arabie Saoudite", "eqB": "ğŸ‡ºğŸ‡¾ Uruguay", "scA": None, "scB": None}, {"id": 45, "groupe": "Groupe H", "eqA": "ğŸ‡ªğŸ‡¸ Espagne", "eqB": "ğŸ‡¸ğŸ‡¦ Arabie Saoudite", "scA": None, "scB": None}, {"id": 46, "groupe": "Groupe H", "eqA": "ğŸ‡¨ğŸ‡» Cap-Vert", "eqB": "ğŸ‡ºğŸ‡¾ Uruguay", "scA": None, "scB": None}, {"id": 47, "groupe": "Groupe H", "eqA": "ğŸ‡ºğŸ‡¾ Uruguay", "eqB": "ğŸ‡ªğŸ‡¸ Espagne", "scA": None, "scB": None}, {"id": 48, "groupe": "Groupe H", "eqA": "ğŸ‡¨ğŸ‡» Cap-Vert", "eqB": "ğŸ‡¸ğŸ‡¦ Arabie Saoudite", "scA": None, "scB": None}, {"id": 49, "groupe": "Groupe I", "eqA": "ğŸ‡«ğŸ‡· France", "eqB": "ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal", "scA": None, "scB": None}, {"id": 50, "groupe": "Groupe I", "eqA": "ğŸ³ï¸ Barragiste 2", "eqB": "ğŸ‡³ğŸ‡´ NorvÃ¨ge", "scA": None, "scB": None}, {"id": 51, "groupe": "Groupe I", "eqA": "ğŸ‡«ğŸ‡· France", "eqB": "ğŸ³ï¸ Barragiste 2", "scA": None, "scB": None}, {"id": 52, "groupe": "Groupe I", "eqA": "ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal", "eqB": "ğŸ‡³ğŸ‡´ NorvÃ¨ge", "scA": None, "scB": None}, {"id": 53, "groupe": "Groupe I", "eqA": "ğŸ‡³ğŸ‡´ NorvÃ¨ge", "eqB": "ğŸ‡«ğŸ‡· France", "scA": None, "scB": None}, {"id": 54, "groupe": "Groupe I", "eqA": "ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal", "eqB": "ğŸ³ï¸ Barragiste 2", "scA": None, "scB": None}, {"id": 55, "groupe": "Groupe J", "eqA": "ğŸ‡¦ğŸ‡· Argentine", "eqB": "ğŸ‡©ğŸ‡¿ AlgÃ©rie", "scA": None, "scB": None}, {"id": 56, "groupe": "Groupe J", "eqA": "ğŸ‡¦ğŸ‡¹ Autriche", "eqB": "ğŸ‡¯ğŸ‡´ Jordanie", "scA": None, "scB": None}, {"id": 57, "groupe": "Groupe J", "eqA": "ğŸ‡¦ğŸ‡· Argentine", "eqB": "ğŸ‡¦ğŸ‡¹ Autriche", "scA": None, "scB": None}, {"id": 58, "groupe": "Groupe J", "eqA": "ğŸ‡©ğŸ‡¿ AlgÃ©rie", "eqB": "ğŸ‡¯ğŸ‡´ Jordanie", "scA": None, "scB": None}, {"id": 59, "groupe": "Groupe J", "eqA": "ğŸ‡¯ğŸ‡´ Jordanie", "eqB": "ğŸ‡¦ğŸ‡· Argentine", "scA": None, "scB": None}, {"id": 60, "groupe": "Groupe J", "eqA": "ğŸ‡©ğŸ‡¿ AlgÃ©rie", "eqB": "ğŸ‡¦ğŸ‡¹ Autriche", "scA": None, "scB": None}, {"id": 61, "groupe": "Groupe K", "eqA": "ğŸ‡µğŸ‡¹ Portugal", "eqB": "ğŸ³ï¸ Barragiste 1", "scA": None, "scB": None}, {"id": 62, "groupe": "Groupe K", "eqA": "ğŸ‡ºğŸ‡¿ OuzbÃ©kistan", "eqB": "ğŸ‡¨ğŸ‡´ Colombie", "scA": None, "scB": None}, {"id": 63, "groupe": "Groupe K", "eqA": "ğŸ‡µğŸ‡¹ Portugal", "eqB": "ğŸ‡ºğŸ‡¿ OuzbÃ©kistan", "scA": None, "scB": None}, {"id": 64, "groupe": "Groupe K", "eqA": "ğŸ³ï¸ Barragiste 1", "eqB": "ğŸ‡¨ğŸ‡´ Colombie", "scA": None, "scB": None}, {"id": 65, "groupe": "Groupe K", "eqA": "ğŸ‡¨ğŸ‡´ Colombie", "eqB": "ğŸ‡µğŸ‡¹ Portugal", "scA": None, "scB": None}, {"id": 66, "groupe": "Groupe K", "eqA": "ğŸ³ï¸ Barragiste 1", "eqB": "ğŸ‡ºğŸ‡¿ OuzbÃ©kistan", "scA": None, "scB": None}, {"id": 67, "groupe": "Groupe L", "eqA": "ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre", "eqB": "ğŸ‡­ğŸ‡· Croatie", "scA": None, "scB": None}, {"id": 68, "groupe": "Groupe L", "eqA": "ğŸ‡¬ğŸ‡­ Ghana", "eqB": "ğŸ‡µğŸ‡¦ Panama", "scA": None, "scB": None}, {"id": 69, "groupe": "Groupe L", "eqA": "ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre", "eqB": "ğŸ‡¬ğŸ‡­ Ghana", "scA": None, "scB": None}, {"id": 70, "groupe": "Groupe L", "eqA": "ğŸ‡­ğŸ‡· Croatie", "eqB": "ğŸ‡µğŸ‡¦ Panama", "scA": None, "scB": None}, {"id": 71, "groupe": "Groupe L", "eqA": "ğŸ‡µğŸ‡¦ Panama", "eqB": "ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre", "scA": None, "scB": None}, {"id": 72, "groupe": "Groupe L", "eqA": "ğŸ‡­ğŸ‡· Croatie", "eqB": "ğŸ‡¬ğŸ‡­ Ghana", "scA": None, "scB": None}, ]
--- FONCTIONS ---
def charger_donnees(): try: sheet = connect_to_gsheets() data = sheet.get_all_records() if not data: return pd.DataFrame(columns=["Pseudo", "Match_ID", "Prono_A", "Prono_B"]) return pd.DataFrame(data) except Exception as e: return pd.DataFrame(columns=["Pseudo", "Match_ID", "Prono_A", "Prono_B"])

def sauvegarder_prono(pseudo, match_id, pa, pb): sheet = connect_to_gsheets() sheet.append_row([pseudo, match_id, pa, pb])

def calculer_points(prono_a, prono_b, reel_a, reel_b): if reel_a is None: return 0 try: pa, pb = int(prono_a), int(prono_b) ra, rb = int(reel_a), int(reel_b) except: return 0 points = 0 res_reel = 1 if ra > rb else (2 if rb > ra else 0) res_prono = 1 if pa > pb else (2 if pb > pa else 0) if res_reel == res_prono: points += 1 if pa == ra and pb == rb: points += 2 return points
--- INTERFACE ---
st.title("ğŸ† Coupe du Monde 2026") tab1, tab2, tab3 = st.tabs(["ğŸ“ Pronostics", "ğŸ“Š Classement", "ğŸŒ Les Groupes"])

with tab1: st.write("### Remplis ta grille") try: if "google_ok" not in st.session_state: connect_to_gsheets() st.session_state["google_ok"] = True except Exception as e: st.error(f"âš ï¸ Erreur de connexion Google. VÃ©rifie tes 'Secrets'. DÃ©tail: {e}")
with tab2: st.write("### ğŸ¥‡ Le Podium") df = charger_donnees() if df.empty: st.info("Personne n'a encore pariÃ©.") else: scores_joueurs = {} joueurs = df['Pseudo'].unique() for j in joueurs: pts = 0 pronos_j = df[df.Pseudo == j] for m in MATCHS: pari = pronos_j[pronos_j.Match_ID == m['id']] if not pari.empty and m['scA'] is not None: try: pts += calculer_points(pari.iloc[0]['Prono_A'], pari.iloc[0]['Prono_B'], m['scA'], m['scB']) except: pass scores_joueurs[j] = pts

with tab3: st.header("ğŸŒ Les Ã‰quipes par Groupe") groupes = sorted(list(set(m['groupe'] for m in MATCHS))) for grp in groupes: with st.expander(grp, expanded=False): equipes_du_groupe = set() matchs_du_groupe = [m for m in MATCHS if m['groupe'] == grp] for m in matchs_du_groupe: equipes_du_groupe.add(m['eqA']) equipes_du_groupe.add(m['eqB']) for equipe in sorted(list(equipes_du_groupe)): st.write(f"ğŸ›¡ï¸ {equipe}")
